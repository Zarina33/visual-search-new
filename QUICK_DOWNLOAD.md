# üì• –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ CDN

## üöÄ –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±

```bash
python download_cdn.py
```

–í—Å—ë! –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–ø–∫—É `./cdn_images/`

---

## üìù –°–ø–æ—Å–æ–±—ã –∑–∞–ø—É—Å–∫–∞

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –æ–±—ã—á–Ω—ã–π Python
```bash
python download_cdn.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Poetry (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ)
```bash
poetry run python download_cdn.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –£–∫–∞–∑–∞—Ç—å —Å–≤–æ—é –ø–∞–ø–∫—É
```bash
python download_cdn.py --output /path/to/my/images
```

---

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|----------|----------|--------|
| `--output` –∏–ª–∏ `-o` | –ü–∞–ø–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è | `--output /home/user/images` |

---

## üìä –ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ

```
======================================================================
  üì• –ú–ê–°–°–û–í–ê–Ø –ó–ê–ì–†–£–ó–ö–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô –ò–ó CDN
======================================================================

üìÅ –ü–∞–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: /home/zarina/.../cdn_images

üì¶ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö...
‚úÖ –ù–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤: 76462
üì• –ö –∑–∞–≥—Ä—É–∑–∫–µ: 76462

üöÄ –ù–∞—á–∏–Ω–∞—é –∑–∞–≥—Ä—É–∑–∫—É (5 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)...
–ó–∞–≥—Ä—É–∑–∫–∞: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 76462/76462 [45:30<00:00, 28.0 img/s]

======================================================================
üìä –ò–¢–û–ì–ò
======================================================================

‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: 76450/76462
‚ùå –û—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏: 12

üìÅ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: /home/zarina/.../cdn_images
üíæ –†–∞–∑–º–µ—Ä –Ω–∞ –¥–∏—Å–∫–µ: 3.45 GB

üí° –î–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞
   (—É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –ø—Ä–æ–ø—É—â–µ–Ω—ã)
======================================================================
```

---

## ‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. ‚úÖ –ë–µ—Ä–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ PostgreSQL
2. ‚úÖ –°–∫–∞—á–∏–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ URL
3. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ `{external_id}.jpg`
4. ‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ
5. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —Å–∫–æ—Ä–æ—Å—Ç—å
6. ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–µ—Ä–≤–∞—Ç—å (Ctrl+C) –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∑–∂–µ

---

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:
```bash
pip install httpx tqdm
```

–ò–ª–∏ —á–µ—Ä–µ–∑ poetry:
```bash
poetry install
```

### PostgreSQL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω:
```bash
docker-compose ps postgres
# –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å "Up"
```

---

## üí° –°–æ–≤–µ—Ç—ã

### –ü—Ä–µ—Ä–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
–ù–∞–∂–º–∏—Ç–µ `Ctrl+C` - –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è

### –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞ - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ

### –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ –¥—Ä—É–≥—É—é –ø–∞–ø–∫—É
```bash
python download_cdn.py --output /my/custom/path
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ (–¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤)
```bash
nohup python download_cdn.py > download.log 2>&1 &
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å: tail -f download.log
```

---

## üêõ –ü—Ä–æ–±–ª–µ–º—ã?

### –û—à–∏–±–∫–∞: "No module named 'httpx'"
```bash
pip install httpx tqdm
```

### –û—à–∏–±–∫–∞: "Failed to connect to database"
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL
docker-compose up -d postgres

# –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5 —Å–µ–∫—É–Ω–¥
sleep 5

# –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ
python download_cdn.py
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
–ò–∑–º–µ–Ω–∏—Ç–µ –≤ –∫–æ–¥–µ `download_cdn.py`:
```python
CONCURRENT_DOWNLOADS = 10  # –ë—ã–ª–æ 5, —Å—Ç–∞–ª–æ 10
```

---

## üìÅ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—É—á–∏—Ç–µ:
```
cdn_images/
‚îú‚îÄ‚îÄ bakai_12345.jpg
‚îú‚îÄ‚îÄ bakai_12346.jpg
‚îú‚îÄ‚îÄ bakai_12347.jpg
‚îî‚îÄ‚îÄ ... (–≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ)
```

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è:
- –õ–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∏/–∞–Ω–∞–ª–∏–∑–∞
- –†–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---

**üéâ –ì–æ—Ç–æ–≤–æ! –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `python download_cdn.py` –∏ –≤—Å—ë!**



